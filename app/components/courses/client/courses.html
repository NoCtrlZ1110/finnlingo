<template name="courses">
    <div class="content">
        <div v-if="loggingIn">
            Loading...
        </div>
        <div v-else-if="!user">
            <a href="javascript:void(0);" v-on:click="Meteor.loginWithFacebook()">Login</a>
        </div>
        <div v-else-if="$route.params.id" class="course-tree">
            <div class="top-bar">
                <router-link to="/courses">Back to courses</router-link>
            </div>
            <div v-if="course == null" class="error">Course not found</div>

            <course-tree v-else v-bind:course="course" mode="edit"></course-tree>
        </div>
        <div v-else class="courses">
            <div class="top-bar">
                <router-link to="/">Back to home</router-link>
            </div>
            <h2>Select course</h2>
            <div class="row" v-for="course in courses">
                <a href="javascript:void()" v-on:click="selectCourse(course._id)">{{course.name}}</a>
                &nbsp; 
                <a href="javascript:void();" v-if="canEdit(course)" v-on:click="editCourse(course._id)"><i class="fa fa-pencil"></i></a>
                <a href="javascript:void();" v-if="canEdit(course)" v-on:click="removeCourse(course._id)"><i class="fa fa-times"></i></a>
            </div>
            <div class="row">
                <a href="javascript:void(0);" v-on:click="addCourse()">Create a new course</a>
            </div>
        </div>
    </div>
</template>